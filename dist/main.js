!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=2)}([function(e,t){function n(e,t){return a(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e){if(Array.isArray(e))return e}function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(e,t,n){return Math.pow(t,n)*Math.pow(e,1-n)}function l(e,t,n,i,a){e.translate(i,a),e.scale(t,n),e.translate(-i,-a)}function c(e,t,n,i){e.translate(n,i),e.rotate(t),e.translate(-n,-i)}function h(e){var t,r=a(t=e)||s(t)||i(),o=n(r[0],3),l=o[0],c=o[1],h=o[2],u=n(r[1],3),d=u[0],f=u[1],p=u[2],v=(r.slice(2),l*f-d*c);return h||p?[[f/v,-c/v,(c*p-f*h)/v],[-d/v,l/v,(d*h-l*p)/v],[0,0,1]]:[[f/v,-c/v],[-d/v,l/v]]}function u(e,t){for(var n=t.map((function(){return 0})),i=0;i<e.length;i++)for(var a=0;a<t.length;a++)n[i]+=t[a]*e[i][a];return n}e.exports={interpolateNumberLinear:function(e,t,n){return e+(t-e)*n},interpolateNumberLogarithmic:o,interpolateVectorLinear:function(e,t,n){for(var i=Array.from(e),a=0;a<e.length;a++)i[a]+=(t[a]-e[a])*n;return i},interpolateVectorLogarithmic:function(e,t,n){for(var i=Array.from(e),a=0;a<e.length;a++)i[a]=o(e[a],t[a],n);return i},scaleFrom:l,rotateAround:c,applyTransform:function(e,t){var n=t.scale,i=t.rotate,a=t.scaleCenter,s=void 0===a?[0,0]:a,o=t.rotateCenter,h=void 0===o?[0,0]:o;l.apply(void 0,[e].concat(r(n),r(s))),c.apply(void 0,[e,i].concat(r(h)))},invertTransform:function(e){var t=n(e.scale,2);return{scale:[1/t[0],1/t[1]],rotate:-e.rotate}},fixedPoint:function(e){var t=e.a,n=e.b,i=e.c,a=e.d,r=e.e,s=e.f;return u(h([[1-t,0-i],[0-n,1-a]]),[r,s])},invertMatrix:h,matVecMultiply:u,logBase:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.e;return Math.log(e)/Math.log(t)}}},function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=n(6),r=n(0),s=n(7).openModal,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t.getContext("2d"),this.width=t.width,this.height=t.height,this.playing=!1,this.frameCt=0,this.shape=a.polygon({ctx:this.ctx,sides:4,radius:Math.min(this.width,this.height)/2}),this.cycleLength=240,this.cycles=0,this.animate=this.animate.bind(this),this.togglePlay=this.togglePlay.bind(this),this.setupCanvas(),this.attachListeners(),s()}var t,n,o;return t=e,(n=[{key:"setupCanvas",value:function(){var e=this.ctx,t=this.width,n=this.height;e.translate(t/2,n/2),e.scale(1,-1)}},{key:"attachListeners",value:function(){var e=this,t=document.getElementById("canvas");this.scaleSlider=document.getElementById("scale-slider"),this.angleSlider=document.getElementById("angle-slider"),this.hueSlider=document.getElementById("hue-slider"),this.sidesSlider=document.getElementById("sides-slider"),this.speedSlider=document.getElementById("speed-slider"),this.offsetSlider=document.getElementById("offset-slider"),t.addEventListener("click",this.togglePlay),this.scaleSlider.addEventListener("input",(function(t){return e.setScale(t.target.value)})),this.angleSlider.addEventListener("input",(function(t){return e.setAngle(t.target.value)})),this.sidesSlider.addEventListener("input",(function(t){return e.setSides(t.target.value)})),this.speedSlider.addEventListener("input",(function(t){return e.setSpeed(t.target.value)})),this.offsetSlider.addEventListener("input",(function(t){return e.setOffset(t.target.value)})),this.hueSlider.parentElement.removeChild(this.hueSlider),window.onresize=function(){e.width=e.ctx.canvas.width=window.innerWidth,e.height=e.ctx.canvas.height=window.innerHeight,e.shape=a.polygon({ctx:e.ctx,sides:e.sidesSlider.value,radius:Math.min(e.width,e.height)/2,scale:e.shape.scale,rotate:e.shape.rotate,scaleCenter:e.shape.scaleCenter}),e.postShapeUpdate()},window.addEventListener("keydown",(function(t){81===t.keyCode&&e.setScale(parseFloat(e.scaleSlider.value)-.005),87===t.keyCode&&e.setScale(parseFloat(e.scaleSlider.value)+.005),65===t.keyCode&&e.setAngle(parseFloat(e.angleSlider.value)-.0025),83===t.keyCode&&e.setAngle(parseFloat(e.angleSlider.value)+.0025),219===t.keyCode&&e.setSides(parseFloat(e.sidesSlider.value)-.05),221===t.keyCode&&e.setSides(parseFloat(e.sidesSlider.value)+.05)}))}},{key:"postShapeUpdate",value:function(){this.ctx.resetTransform(),this.shape.computeFixedPoint(),this.setupCanvas(),this.shape.computeDepth(),this.playing||this.animate()}},{key:"play",value:function(){this.playing=!0,requestAnimationFrame(this.animate)}},{key:"togglePlay",value:function(e){e.preventDefault(),this.playing?this.playing=!1:this.play()}},{key:"animate",value:function(){var e=this.ctx,t=this.shape,n=this.width,i=this.height,a=this.frameCt;e.save(),e.clearRect(-n/2,-i/2,n,i);var r=a%this.cycleLength/this.cycleLength;t.transform(-r),this.playing&&(this.frameCt++,a>=this.cycleLength&&(this.frameCt=0,this.cycles++)),t.draw(this.cycles,r),e.restore(),this.playing&&requestAnimationFrame(this.animate)}},{key:"setScale",value:function(e){this.scaleSlider.value=e,e=this.scaleSlider.value,this.shape.scale=[e,e],this.postShapeUpdate()}},{key:"setAngle",value:function(e){this.angleSlider.value=e,e=this.angleSlider.value,this.shape.rotate=parseFloat(e)*Math.PI,this.postShapeUpdate()}},{key:"setHue",value:function(e){this.hueSlider.value=e,e=this.hueSlider.value,this.shape.hue=parseInt(e)}},{key:"setSides",value:function(e){this.sidesSlider.value=e,e=this.sidesSlider.value,this.shape=a.polygon({ctx:this.ctx,sides:e,radius:Math.min(this.width,this.height)/2,rotate:this.shape.rotate,scale:this.shape.scale,scaleCenter:this.shape.scaleCenter,hue:this.shape.hue}),this.postShapeUpdate()}},{key:"setSpeed",value:function(e){this.speedSlider.value=e,e=this.speedSlider.value;var t=this.cycleLength;this.cycleLength=Math.round(r.interpolateNumberLogarithmic(480,30,e)),this.frameCt=Math.round(this.frameCt*(this.cycleLength/t)),this.postShapeUpdate()}},{key:"setOffset",value:function(e){this.offsetSlider.value=e,e=this.offsetSlider.value;var t=Math.min(this.width,this.height)/2;this.shape.scaleCenter=[0,r.interpolateNumberLinear(0,t,e)],this.postShapeUpdate()}}])&&i(t.prototype,n),o&&i(t,o),e}();e.exports=o},function(e,t,n){"use strict";n.r(t);n(3),n(4),n(5);var i=n(1),a=n.n(i);window.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("canvas");e.width=window.innerWidth,e.height=window.innerHeight,new a.a(e).play()}))},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=n(0),o={scale:[1,1],rotate:0,scaleCenter:[0,0],hue:127,colors:[[13,"47%","42%"],[51,"42%","55%"],[0,"24%","36%"],[40,"69%","64%"],[51,"92%","70%"]]},l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=Object.assign({},o,t),this.ctx=t.ctx,this.vertices=t.vertices,this.scale=t.scale,this.scaleCenter=t.scaleCenter,this.rotate=t.rotate,this.colors=t.colors,this.hue=t.hue,this.computeFixedPoint(),this.computeDepth()}var t,n,l;return t=e,l=[{key:"polygon",value:function(t){for(var n=t.ctx,i=t.sides,a=t.radius,r=t.rotate,s=t.scale,l=t.scaleCenter,c=t.hue,h=void 0===c?127:c,u=[],d=2*Math.PI/i,f=0;f<i;f++){var p=f*d,v=a*Math.cos(p),y=a*Math.sin(p);u.push([y,v])}void 0===r&&(r=d/2);var m=Math.abs(Math.cos(d/2));return new e({ctx:n,vertices:u,rotate:r,scale:s=s||[m,m],scaleCenter:l=l||o.scaleCenter,hue:h})}}],(n=[{key:"tracePath",value:function(){var e=this.ctx,t=this.vertices;e.beginPath(),e.moveTo.apply(e,a(t[0]));for(var n=1;n<t.length;n++)e.lineTo.apply(e,a(t[n]));e.closePath()}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.ctx,n=this.scale,i=this.rotate,a=this.fixedPoint,r={scale:s.interpolateVectorLogarithmic(o.scale,n,e),rotate:s.interpolateNumberLinear(o.rotate,i,e),scaleCenter:a,rotateCenter:a};s.applyTransform(t,r)}},{key:"draw",value:function(e,t){var n=this.ctx,a=this.hue,r=this.colors,o=this.maxDepth,l=this.depthOffset;n.save(),this.transform(-l);for(var c=-l;c<o;c++){this.tracePath(n);var h=(e+c)%r.length,u=i(r[h=(h+r.length)%r.length],3),d=u[0],f=u[1],p=u[2],v=Math.max(Math.ceil(o/2),Math.min(o,5)),y=s.interpolateNumberLinear(c+1,c,t)-v,m=s.interpolateNumberLinear(1,0,y/(1+o-v));n.fillStyle="hsla(".concat((a+d)%360,",").concat(f,",").concat(p,",").concat(m,")"),n.fill(),this.transform()}n.restore()}},{key:"computeFixedPoint",value:function(){var e=this.ctx,t=this.scale,n=this.rotate,i=this.scaleCenter;if(1!==this.scale[0]&&1!==this.scale[1]){e.save(),s.applyTransform(e,{scale:t,rotate:n,scaleCenter:i});var a=e.getTransform();this.fixedPoint=s.fixedPoint(a),e.restore()}else this.fixedPoint=i}},{key:"computeDepth",value:function(){var e=this.ctx.canvas,t=e.width,n=e.height,a=Math.sqrt(Math.pow(t/2,2)+Math.pow(n/2,2)),r=i(this.scale,2),o=r[0],l=r[1];this.depthOffset=Math.ceil(s.logBase(3*a,Math.min(1/o,1/l))),this.maxDepth=Math.max(Math.ceil(-s.logBase(t,o)),Math.ceil(-s.logBase(n,l))),this.maxDepth=Math.min(this.maxDepth,5e3)}}])&&r(t.prototype,n),l&&r(t,l),e}();e.exports=l},function(e,t){var n=function(e){e.stopPropagation()},i=function e(){var t=document.getElementById("modal"),i=t.parentElement,a=document.getElementById("start-button");i.classList.add("hiding"),t.classList.add("hiding"),i.removeEventListener("click",e),a.removeEventListener("click",e),t.removeEventListener("click",n),setTimeout((function(){t.classList.remove("hiding"),i.classList.remove("hiding"),t.classList.add("hidden"),i.classList.add("hidden")}),400)};e.exports={openModal:function(){var e=document.getElementById("modal"),t=e.parentElement,a=document.getElementById("start-button");t.classList.remove("hidden"),e.classList.remove("hidden"),t.addEventListener("click",i),a.addEventListener("click",i),e.addEventListener("click",n)},closeModal:i}}]);
//# sourceMappingURL=main.js.map