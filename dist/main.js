!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=2)}([function(t,e){function n(t,e){return i(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(t){if(Array.isArray(t))return t}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(t,e,n){return Math.pow(e,n)*Math.pow(t,1-n)}function l(t,e,n,r,i){t.translate(r,i),t.scale(e,n),t.translate(-r,-i)}function c(t,e,n,r){t.translate(n,r),t.rotate(e),t.translate(-n,-r)}function h(t){var e,a=i(e=t)||s(e)||r(),o=n(a[0],3),l=o[0],c=o[1],h=o[2],u=n(a[1],3),d=u[0],f=u[1],p=u[2],v=(a.slice(2),l*f-d*c);return h||p?[[f/v,-c/v,(c*p-f*h)/v],[-d/v,l/v,(d*h-l*p)/v],[0,0,1]]:[[f/v,-c/v],[-d/v,l/v]]}function u(t,e){for(var n=e.map((function(){return 0})),r=0;r<t.length;r++)for(var i=0;i<e.length;i++)n[r]+=e[i]*t[r][i];return n}t.exports={interpolateNumberLinear:function(t,e,n){return t+(e-t)*n},interpolateNumberLogarithmic:o,interpolateVectorLinear:function(t,e,n){for(var r=Array.from(t),i=0;i<t.length;i++)r[i]+=(e[i]-t[i])*n;return r},interpolateVectorLogarithmic:function(t,e,n){for(var r=Array.from(t),i=0;i<t.length;i++)r[i]=o(t[i],e[i],n);return r},scaleFrom:l,rotateAround:c,applyTransform:function(t,e){var n=e.scale,r=e.rotate,i=e.scaleCenter,s=void 0===i?[0,0]:i,o=e.rotateCenter,h=void 0===o?[0,0]:o;l.apply(void 0,[t].concat(a(n),a(s))),c.apply(void 0,[t,r].concat(a(h)))},invertTransform:function(t){var e=n(t.scale,2);return{scale:[1/e[0],1/e[1]],rotate:-t.rotate}},fixedPoint:function(t){var e=t.a,n=t.b,r=t.c,i=t.d,a=t.e,s=t.f;return u(h([[1-e,0-r],[0-n,1-i]]),[a,s])},invertMatrix:h,matVecMultiply:u,logBase:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.e;return Math.log(t)/Math.log(e)}}},function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(5),a=n(0),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e.getContext("2d"),this.width=e.width,this.height=e.height,this.playing=!1,this.frameCt=0,this.shape=i.polygon({ctx:this.ctx,sides:4,radius:Math.min(this.width,this.height)/2}),this.cycleLength=240,this.cycles=0,this.animate=this.animate.bind(this),this.togglePlay=this.togglePlay.bind(this),this.setupCanvas(),this.attachListeners()}var e,n,s;return e=t,(n=[{key:"setupCanvas",value:function(){var t=this.ctx,e=this.width,n=this.height;t.translate(e/2,n/2),t.scale(1,-1)}},{key:"attachListeners",value:function(){var t=this,e=document.getElementById("canvas");this.scaleSlider=document.getElementById("scale-slider"),this.angleSlider=document.getElementById("angle-slider"),this.sidesSlider=document.getElementById("sides-slider"),this.speedSlider=document.getElementById("speed-slider"),this.offsetSlider=document.getElementById("offset-slider"),e.addEventListener("click",this.togglePlay),this.scaleSlider.addEventListener("input",(function(e){return t.setScale(e.target.value)})),this.angleSlider.addEventListener("input",(function(e){return t.setAngle(e.target.value)})),this.sidesSlider.addEventListener("input",(function(e){return t.setSides(e.target.value)})),this.speedSlider.addEventListener("input",(function(e){return t.setSpeed(e.target.value)})),this.offsetSlider.addEventListener("input",(function(e){return t.setOffset(e.target.value)})),window.onresize=function(){t.width=t.ctx.canvas.width=window.innerWidth,t.height=t.ctx.canvas.height=window.innerHeight,t.shape=i.polygon({ctx:t.ctx,sides:t.sidesSlider.value,radius:Math.min(t.width,t.height)/2,scale:t.shape.scale,rotate:t.shape.rotate,scaleCenter:t.shape.scaleCenter}),t.postShapeUpdate()},window.addEventListener("keydown",(function(e){81===e.keyCode&&t.setScale(parseFloat(t.scaleSlider.value)-.005),87===e.keyCode&&t.setScale(parseFloat(t.scaleSlider.value)+.005),65===e.keyCode&&t.setAngle(parseFloat(t.angleSlider.value)-.0025),83===e.keyCode&&t.setAngle(parseFloat(t.angleSlider.value)+.0025),219===e.keyCode&&t.setSides(parseFloat(t.sidesSlider.value)-.05),221===e.keyCode&&t.setSides(parseFloat(t.sidesSlider.value)+.05)}))}},{key:"postShapeUpdate",value:function(){this.ctx.resetTransform(),this.shape.computeFixedPoint(),this.setupCanvas(),this.shape.computeDepth(),this.playing||this.animate()}},{key:"play",value:function(){this.playing=!0,requestAnimationFrame(this.animate)}},{key:"togglePlay",value:function(t){t.preventDefault(),this.playing?this.playing=!1:this.play()}},{key:"animate",value:function(){var t=this.ctx,e=this.shape,n=this.width,r=this.height,i=this.frameCt;t.save(),t.clearRect(-n/2,-r/2,n,r);var a=i%this.cycleLength/this.cycleLength;e.transform(-a),this.playing&&(this.frameCt++,i>=this.cycleLength&&(this.frameCt=0,this.cycles++)),e.draw(this.cycles,a),t.restore(),this.playing&&requestAnimationFrame(this.animate)}},{key:"setScale",value:function(t){this.scaleSlider.value=t,t=this.scaleSlider.value,this.shape.scale=[t,t],this.postShapeUpdate()}},{key:"setAngle",value:function(t){this.angleSlider.value=t,t=this.angleSlider.value,this.shape.rotate=parseFloat(t)*Math.PI,this.postShapeUpdate()}},{key:"setSides",value:function(t){this.sidesSlider.value=t,t=this.sidesSlider.value,this.shape=i.polygon({ctx:this.ctx,sides:t,radius:Math.min(this.width,this.height)/2,rotate:this.shape.rotate,scale:this.shape.scale,scaleCenter:this.shape.scaleCenter}),this.postShapeUpdate()}},{key:"setSpeed",value:function(t){this.speedSlider.value=t,t=this.speedSlider.value;var e=this.cycleLength;this.cycleLength=Math.round(a.interpolateNumberLogarithmic(480,30,t)),this.frameCt=Math.round(this.frameCt*(this.cycleLength/e)),this.postShapeUpdate()}},{key:"setOffset",value:function(t){this.offsetSlider.value=t,t=this.offsetSlider.value;var e=Math.min(this.width,this.height)/2;this.shape.scaleCenter=[0,a.interpolateNumberLinear(0,e,t)],this.postShapeUpdate()}}])&&r(e.prototype,n),s&&r(e,s),t}();t.exports=s},function(t,e,n){"use strict";n.r(e);n(3),n(4);var r=n(1),i=n.n(r);window.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("canvas");t.width=window.innerWidth,t.height=window.innerHeight,new i.a(t).play()}))},function(t,e,n){},function(t,e,n){},function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=n(0),o={scale:[1,1],rotate:0,scaleCenter:[0,0],colors:[[57,158,90],[90,188,185],[70,115,75],[99,226,198],[110,249,245]]},l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=Object.assign({},o,e),this.ctx=e.ctx,this.vertices=e.vertices,this.scale=e.scale,this.scaleCenter=e.scaleCenter,this.rotate=e.rotate,this.colors=e.colors,this.computeFixedPoint(),this.computeDepth()}var e,n,l;return e=t,l=[{key:"polygon",value:function(e){for(var n=e.ctx,r=e.sides,i=e.radius,a=e.rotate,s=e.scale,l=e.scaleCenter,c=[],h=2*Math.PI/r,u=0;u<r;u++){var d=u*h,f=i*Math.cos(d),p=i*Math.sin(d);c.push([p,f])}void 0===a&&(a=h/2);var v=Math.abs(Math.cos(h/2));return new t({ctx:n,vertices:c,rotate:a,scale:s=s||[v,v],scaleCenter:l=l||o.scaleCenter})}}],(n=[{key:"tracePath",value:function(){var t=this.ctx,e=this.vertices;t.beginPath(),t.moveTo.apply(t,i(e[0]));for(var n=1;n<e.length;n++)t.lineTo.apply(t,i(e[n]));t.closePath()}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.ctx,n=this.scale,r=this.rotate,i=this.fixedPoint,a={scale:s.interpolateVectorLogarithmic(o.scale,n,t),rotate:s.interpolateNumberLinear(o.rotate,r,t),scaleCenter:i,rotateCenter:i};s.applyTransform(e,a)}},{key:"draw",value:function(t,e){var n=this.ctx,i=this.colors,a=this.maxDepth,o=this.depthOffset;n.save(),this.transform(-o);for(var l=-o;l<a;l++){this.tracePath(n);var c=(t+l)%i.length,h=r(i[c=(c+i.length)%i.length],3),u=h[0],d=h[1],f=h[2],p=Math.max(Math.ceil(a/2),Math.min(a,5)),v=s.interpolateNumberLinear(l+1,l,e)-p,y=s.interpolateNumberLinear(1,0,v/(1+a-p));n.fillStyle="rgba(".concat(u,",").concat(d,",").concat(f,",").concat(y,")"),n.fill(),this.transform()}n.restore()}},{key:"computeFixedPoint",value:function(){var t=this.ctx,e=this.scale,n=this.rotate,r=this.scaleCenter;if(1!==this.scale[0]&&1!==this.scale[1]){t.save(),s.applyTransform(t,{scale:e,rotate:n,scaleCenter:r});var i=t.getTransform();this.fixedPoint=s.fixedPoint(i),t.restore()}else this.fixedPoint=r}},{key:"computeDepth",value:function(){var t=this.ctx.canvas,e=t.width,n=t.height,i=Math.sqrt(Math.pow(e/2,2)+Math.pow(n/2,2)),a=r(this.scale,2),o=a[0],l=a[1];this.depthOffset=Math.ceil(s.logBase(3*i,Math.min(1/o,1/l))),this.maxDepth=1+Math.max(Math.ceil(-s.logBase(e,o)),Math.ceil(-s.logBase(n,l))),this.maxDepth=Math.min(this.maxDepth,5e3)}}])&&a(e.prototype,n),l&&a(e,l),t}();t.exports=l}]);
//# sourceMappingURL=main.js.map