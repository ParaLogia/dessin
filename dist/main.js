!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=2)}([function(e,t){function n(e,t){return r(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(e){if(Array.isArray(e))return e}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(e,t,n){return Math.pow(t,n)*Math.pow(e,1-n)}function l(e,t,n,i,r){e.translate(i,r),e.scale(t,n),e.translate(-i,-r)}function h(e,t,n,i){e.translate(n,i),e.rotate(t),e.translate(-n,-i)}function c(e){var t,a=r(t=e)||s(t)||i(),o=n(a[0],3),l=o[0],h=o[1],c=o[2],u=n(a[1],3),d=u[0],f=u[1],p=u[2],v=(a.slice(2),l*f-d*h);return c||p?[[f/v,-h/v,(h*p-f*c)/v],[-d/v,l/v,(d*c-l*p)/v],[0,0,1]]:[[f/v,-h/v],[-d/v,l/v]]}function u(e,t){for(var n=t.map((function(){return 0})),i=0;i<e.length;i++)for(var r=0;r<t.length;r++)n[i]+=t[r]*e[i][r];return n}e.exports={interpolateNumberLinear:function(e,t,n){return e+(t-e)*n},interpolateNumberLogarithmic:o,interpolateVectorLinear:function(e,t,n){for(var i=Array.from(e),r=0;r<e.length;r++)i[r]+=(t[r]-e[r])*n;return i},interpolateVectorLogarithmic:function(e,t,n){for(var i=Array.from(e),r=0;r<e.length;r++)i[r]=o(e[r],t[r],n);return i},scaleFrom:l,rotateAround:h,applyTransform:function(e,t){var n=t.scale,i=t.rotate,r=t.scaleCenter,s=void 0===r?[0,0]:r,o=t.rotateCenter,c=void 0===o?[0,0]:o;l.apply(void 0,[e].concat(a(n),a(s))),h.apply(void 0,[e,i].concat(a(c)))},invertTransform:function(e){var t=n(e.scale,2);return{scale:[1/t[0],1/t[1]],rotate:-e.rotate}},fixedPoint:function(e){var t=e.a,n=e.b,i=e.c,r=e.d,a=e.e,s=e.f;return u(c([[1-t,0-i],[0-n,1-r]]),[a,s])},invertMatrix:c,matVecMultiply:u,logBase:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.e;return Math.log(e)/Math.log(t)}}},function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=n(5),a=n(0),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t.getContext("2d"),this.width=t.width,this.height=t.height,this.playing=!1,this.frameCt=0,this.shape=r.polygon({ctx:this.ctx,sides:4,radius:Math.min(this.width,this.height)/2}),this.cycleLength=240,this.cycles=0,this.animate=this.animate.bind(this),this.togglePlay=this.togglePlay.bind(this),this.setupCanvas(),this.attachListeners()}var t,n,s;return t=e,(n=[{key:"setupCanvas",value:function(){var e=this.ctx,t=this.width,n=this.height;e.translate(t/2,n/2),e.scale(1,-1)}},{key:"attachListeners",value:function(){var e=this,t=document.getElementById("canvas");this.scaleSlider=document.getElementById("scale-slider"),this.angleSlider=document.getElementById("angle-slider"),this.hueSlider=document.getElementById("hue-slider"),this.sidesSlider=document.getElementById("sides-slider"),this.speedSlider=document.getElementById("speed-slider"),this.offsetSlider=document.getElementById("offset-slider"),t.addEventListener("click",this.togglePlay),this.scaleSlider.addEventListener("input",(function(t){return e.setScale(t.target.value)})),this.angleSlider.addEventListener("input",(function(t){return e.setAngle(t.target.value)})),this.sidesSlider.addEventListener("input",(function(t){return e.setSides(t.target.value)})),this.speedSlider.addEventListener("input",(function(t){return e.setSpeed(t.target.value)})),this.offsetSlider.addEventListener("input",(function(t){return e.setOffset(t.target.value)})),this.hueSlider.parentElement.removeChild(this.hueSlider),window.onresize=function(){e.width=e.ctx.canvas.width=window.innerWidth,e.height=e.ctx.canvas.height=window.innerHeight,e.shape=r.polygon({ctx:e.ctx,sides:e.sidesSlider.value,radius:Math.min(e.width,e.height)/2,scale:e.shape.scale,rotate:e.shape.rotate,scaleCenter:e.shape.scaleCenter}),e.postShapeUpdate()},window.addEventListener("keydown",(function(t){81===t.keyCode&&e.setScale(parseFloat(e.scaleSlider.value)-.005),87===t.keyCode&&e.setScale(parseFloat(e.scaleSlider.value)+.005),65===t.keyCode&&e.setAngle(parseFloat(e.angleSlider.value)-.0025),83===t.keyCode&&e.setAngle(parseFloat(e.angleSlider.value)+.0025),219===t.keyCode&&e.setSides(parseFloat(e.sidesSlider.value)-.05),221===t.keyCode&&e.setSides(parseFloat(e.sidesSlider.value)+.05)}))}},{key:"postShapeUpdate",value:function(){this.ctx.resetTransform(),this.shape.computeFixedPoint(),this.setupCanvas(),this.shape.computeDepth(),this.playing||this.animate()}},{key:"play",value:function(){this.playing=!0,requestAnimationFrame(this.animate)}},{key:"togglePlay",value:function(e){e.preventDefault(),this.playing?this.playing=!1:this.play()}},{key:"animate",value:function(){var e=this.ctx,t=this.shape,n=this.width,i=this.height,r=this.frameCt;e.save(),e.clearRect(-n/2,-i/2,n,i);var a=r%this.cycleLength/this.cycleLength;t.transform(-a),this.playing&&(this.frameCt++,r>=this.cycleLength&&(this.frameCt=0,this.cycles++)),t.draw(this.cycles,a),e.restore(),this.playing&&requestAnimationFrame(this.animate)}},{key:"setScale",value:function(e){this.scaleSlider.value=e,e=this.scaleSlider.value,this.shape.scale=[e,e],this.postShapeUpdate()}},{key:"setAngle",value:function(e){this.angleSlider.value=e,e=this.angleSlider.value,this.shape.rotate=parseFloat(e)*Math.PI,this.postShapeUpdate()}},{key:"setHue",value:function(e){this.hueSlider.value=e,e=this.hueSlider.value,this.shape.hue=parseInt(e)}},{key:"setSides",value:function(e){this.sidesSlider.value=e,e=this.sidesSlider.value,this.shape=r.polygon({ctx:this.ctx,sides:e,radius:Math.min(this.width,this.height)/2,rotate:this.shape.rotate,scale:this.shape.scale,scaleCenter:this.shape.scaleCenter,hue:this.shape.hue}),this.postShapeUpdate()}},{key:"setSpeed",value:function(e){this.speedSlider.value=e,e=this.speedSlider.value;var t=this.cycleLength;this.cycleLength=Math.round(a.interpolateNumberLogarithmic(480,30,e)),this.frameCt=Math.round(this.frameCt*(this.cycleLength/t)),this.postShapeUpdate()}},{key:"setOffset",value:function(e){this.offsetSlider.value=e,e=this.offsetSlider.value;var t=Math.min(this.width,this.height)/2;this.shape.scaleCenter=[0,a.interpolateNumberLinear(0,t,e)],this.postShapeUpdate()}}])&&i(t.prototype,n),s&&i(t,s),e}();e.exports=s},function(e,t,n){"use strict";n.r(t);n(3),n(4);var i=n(1),r=n.n(i);window.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("canvas");e.width=window.innerWidth,e.height=window.innerHeight,new r.a(e).play()}))},function(e,t,n){},function(e,t,n){},function(e,t,n){function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=n(0),o={scale:[1,1],rotate:0,scaleCenter:[0,0],hue:127,colors:[[13,"47%","42%"],[51,"42%","55%"],[0,"24%","36%"],[40,"69%","64%"],[51,"92%","70%"]]},l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=Object.assign({},o,t),this.ctx=t.ctx,this.vertices=t.vertices,this.scale=t.scale,this.scaleCenter=t.scaleCenter,this.rotate=t.rotate,this.colors=t.colors,this.hue=t.hue,this.computeFixedPoint(),this.computeDepth()}var t,n,l;return t=e,l=[{key:"polygon",value:function(t){for(var n=t.ctx,i=t.sides,r=t.radius,a=t.rotate,s=t.scale,l=t.scaleCenter,h=t.hue,c=void 0===h?127:h,u=[],d=2*Math.PI/i,f=0;f<i;f++){var p=f*d,v=r*Math.cos(p),y=r*Math.sin(p);u.push([y,v])}void 0===a&&(a=d/2);var g=Math.abs(Math.cos(d/2));return new e({ctx:n,vertices:u,rotate:a,scale:s=s||[g,g],scaleCenter:l=l||o.scaleCenter,hue:c})}}],(n=[{key:"tracePath",value:function(){var e=this.ctx,t=this.vertices;e.beginPath(),e.moveTo.apply(e,r(t[0]));for(var n=1;n<t.length;n++)e.lineTo.apply(e,r(t[n]));e.closePath()}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.ctx,n=this.scale,i=this.rotate,r=this.fixedPoint,a={scale:s.interpolateVectorLogarithmic(o.scale,n,e),rotate:s.interpolateNumberLinear(o.rotate,i,e),scaleCenter:r,rotateCenter:r};s.applyTransform(t,a)}},{key:"draw",value:function(e,t){var n=this.ctx,r=this.hue,a=this.colors,o=this.maxDepth,l=this.depthOffset;n.save(),this.transform(-l);for(var h=-l;h<o;h++){this.tracePath(n);var c=(e+h)%a.length,u=i(a[c=(c+a.length)%a.length],3),d=u[0],f=u[1],p=u[2],v=Math.max(Math.ceil(o/2),Math.min(o,5)),y=s.interpolateNumberLinear(h+1,h,t)-v,g=s.interpolateNumberLinear(1,0,y/(1+o-v));n.fillStyle="hsla(".concat((r+d)%360,",").concat(f,",").concat(p,",").concat(g,")"),n.fill(),this.transform()}n.restore()}},{key:"computeFixedPoint",value:function(){var e=this.ctx,t=this.scale,n=this.rotate,i=this.scaleCenter;if(1!==this.scale[0]&&1!==this.scale[1]){e.save(),s.applyTransform(e,{scale:t,rotate:n,scaleCenter:i});var r=e.getTransform();this.fixedPoint=s.fixedPoint(r),e.restore()}else this.fixedPoint=i}},{key:"computeDepth",value:function(){var e=this.ctx.canvas,t=e.width,n=e.height,r=Math.sqrt(Math.pow(t/2,2)+Math.pow(n/2,2)),a=i(this.scale,2),o=a[0],l=a[1];this.depthOffset=Math.ceil(s.logBase(3*r,Math.min(1/o,1/l))),this.maxDepth=Math.max(Math.ceil(-s.logBase(t,o)),Math.ceil(-s.logBase(n,l))),this.maxDepth=Math.min(this.maxDepth,5e3)}}])&&a(t.prototype,n),l&&a(t,l),e}();e.exports=l}]);
//# sourceMappingURL=main.js.map