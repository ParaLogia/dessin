!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=3)}([function(e,t){function i(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e,t){return r(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var i=[],n=!0,s=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){s=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw a}}return i}(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(e){if(Array.isArray(e))return e}function o(e,t,i){return Math.pow(t,i)*Math.pow(e,1-i)}function l(e){var t,i=r(t=e)||n(t)||a(),o=s(i[0],3),l=o[0],h=o[1],c=o[2],u=s(i[1],3),d=u[0],p=u[1],f=u[2],v=(i.slice(2),l*p-d*h);return c||f?[[p/v,-h/v,(h*f-p*c)/v],[-d/v,l/v,(d*c-l*f)/v],[0,0,1]]:[[p/v,-h/v],[-d/v,l/v]]}function h(e,t){for(var i=t.map((function(){return 0})),n=0;n<e.length;n++)for(var s=0;s<t.length;s++)i[n]+=t[s]*e[n][s];return i}e.exports={interpolateNumberLinear:function(e,t,i){return e+(t-e)*i},interpolateNumberLogarithmic:o,interpolateVectorLinear:function(e,t,i){for(var n=Array.from(e),s=0;s<e.length;s++)n[s]+=(t[s]-e[s])*i;return n},interpolateVectorLogarithmic:function(e,t,i){for(var n=Array.from(e),s=0;s<e.length;s++)n[s]=o(e[s],t[s],i);return n},scaleFrom:function(e,t,i,n,s){e.translate(n,s),e.scale(t,i),e.translate(-n,-s)},rotateAround:function(e,t,i,n){e.translate(i,n),e.rotate(t),e.translate(-i,-n)},applyTransform:function(e,t){var n=t.scale,a=t.rotate,r=s(t.center,2),o=r[0],l=r[1];e.translate(o,l),e.scale.apply(e,i(n)),e.rotate(a),e.translate(-o,-l)},invertTransform:function(e){var t=s(e.scale,2);return{scale:[1/t[0],1/t[1]],rotate:-e.rotate}},fixedPoint:function(e){var t=e.a,i=e.b,n=e.c,s=e.d,a=e.e,r=e.f;return h(l([[1-t,0-n],[0-i,1-s]]),[a,r])},invertMatrix:l,matVecMultiply:h,logBase:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.e;return Math.log(e)/Math.log(t)}}},function(e,t){e.exports={HUE_SLIDER:!1,ALPHA:!1}},function(e,t,i){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(7),a=i(0),r=i(1),o=i(8).openModal,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t.getContext("2d",{alpha:r.ALPHA}),this.width=t.width,this.height=t.height,this.playing=!1,this.shape=s.polygon({ctx:this.ctx,sides:4,radius:Math.min(this.width,this.height)/2}),this.cycleLength=240,this.debounceTimer=null,this.zoomFactor=1,this.prevTime=null,this.cycles=0,this.animate=this.animate.bind(this),this.togglePlay=this.togglePlay.bind(this),this.play=this.play.bind(this),this.highlightSliders=this.highlightSliders.bind(this),this.setupCanvas(),this.attachListeners(),requestAnimationFrame(this.animate),o({onClose:this.play})}var t,i,l;return t=e,(i=[{key:"setupCanvas",value:function(){var e=this.ctx,t=this.width,i=this.height;e.translate(t/2,i/2),e.scale(1,-1)}},{key:"highlightSliders",value:function(){var e=this;Object.values(this.sliders).forEach((function(e){e.parentElement.classList.add("active")})),this.debounceTimer&&window.clearTimeout(this.debounceTimer),this.debounceTimer=window.setTimeout((function(){e.debounceTimer=null,Object.values(e.sliders).forEach((function(e){e.parentElement.classList.remove("active")}))}),800)}},{key:"attachListeners",value:function(){var e=this,t=document.getElementById("canvas"),i=document.getElementById("logo-wrapper");this.sliders={},this.sliders.scale=document.getElementById("scale-slider"),this.sliders.angle=document.getElementById("angle-slider"),this.sliders.hue=document.getElementById("hue-slider"),this.sliders.sides=document.getElementById("sides-slider"),this.sliders.speed=document.getElementById("speed-slider"),this.sliders.offset=document.getElementById("offset-slider"),t.addEventListener("click",this.togglePlay),t.addEventListener("click",this.highlightSliders),t.addEventListener("mousemove",this.highlightSliders),i.addEventListener("click",(function(){var t=e.playing;e.pause();var i=t?e.play:function(){};o({animate:!0,onClose:i})})),this.sliders.scale.addEventListener("input",(function(t){return e.setScale(t.target.value)})),this.sliders.angle.addEventListener("input",(function(t){return e.setAngle(t.target.value)})),this.sliders.sides.addEventListener("input",(function(t){return e.setSides(t.target.value)})),this.sliders.speed.addEventListener("input",(function(t){return e.setSpeed(t.target.value)})),this.sliders.offset.addEventListener("input",(function(t){return e.setOffset(t.target.value)})),r.HUE_SLIDER?this.sliders.hue.addEventListener("input",(function(t){return e.setHue(t.target.value)})):(this.sliders.hue.parentElement.removeChild(this.sliders.hue),delete this.sliders.hue),window.onresize=function(){e.width=e.ctx.canvas.width=window.innerWidth,e.height=e.ctx.canvas.height=window.innerHeight,e.shape=s.polygon({ctx:e.ctx,sides:e.sliders.sides.value,radius:Math.min(e.width,e.height)/2,scale:e.shape.scale,rotate:e.shape.rotate,scaleCenter:e.shape.scaleCenter}),e.postShapeUpdate()},window.addEventListener("keydown",(function(t){81===t.keyCode&&e.setScale(parseFloat(e.sliders.scale.value)-.005),87===t.keyCode&&e.setScale(parseFloat(e.sliders.scale.value)+.005),65===t.keyCode&&e.setAngle(parseFloat(e.sliders.angle.value)-.0025),83===t.keyCode&&e.setAngle(parseFloat(e.sliders.angle.value)+.0025),219===t.keyCode&&e.setSides(parseFloat(e.sliders.sides.value)-.05),221===t.keyCode&&e.setSides(parseFloat(e.sliders.sides.value)+.05)}))}},{key:"postShapeUpdate",value:function(){this.ctx.resetTransform(),this.shape.computeFixedPoint(),this.setupCanvas(),this.shape.computeDepth(),this.playing||requestAnimationFrame(this.animate)}},{key:"play",value:function(){this.playing=!0,requestAnimationFrame(this.animate)}},{key:"pause",value:function(){this.playing=!1,this.prevTime=null}},{key:"togglePlay",value:function(){this.playing?this.pause():this.play()}},{key:"animate",value:function(e){var t=this.ctx,i=this.shape,n=this.width,s=this.height,a=e-(this.prevTime||e),r=1/(10*(this.shape.rotate+1)*this.cycleLength);this.zoomFactor=this.zoomFactor+a*r,this.playing&&this.zoomFactor>1&&(this.zoomFactor=this.zoomFactor%1,this.cycles++),t.save(),t.fillStyle="#46724b",t.fillRect(-n/2,-s/2,n,s),i.transform(-this.zoomFactor),i.draw(this.cycles,this.zoomFactor),t.restore(),this.playing&&(requestAnimationFrame(this.animate),this.prevTime=e)}},{key:"setScale",value:function(e){this.sliders.scale.value=e,e=this.sliders.scale.value,this.shape.scale=[e,e],this.postShapeUpdate()}},{key:"setAngle",value:function(e){this.sliders.angle.value=e,e=this.sliders.angle.value,this.shape.rotate=parseFloat(e)*Math.PI,this.postShapeUpdate()}},{key:"setHue",value:function(e){this.sliders.hue.value=e,e=this.sliders.hue.value,this.shape.hue=parseInt(e),this.playing||requestAnimationFrame(this.animate)}},{key:"setSides",value:function(e){this.sliders.sides.value=e,e=this.sliders.sides.value,this.shape=s.polygon({ctx:this.ctx,sides:e,radius:Math.min(this.width,this.height)/2,rotate:this.shape.rotate,scale:this.shape.scale,scaleCenter:this.shape.scaleCenter,hue:this.shape.hue}),this.postShapeUpdate()}},{key:"setSpeed",value:function(e){this.sliders.speed.value=e,e=this.sliders.speed.value,this.cycleLength=Math.round(a.interpolateNumberLogarithmic(480,30,e)),this.postShapeUpdate()}},{key:"setOffset",value:function(e){this.sliders.offset.value=e,e=this.sliders.offset.value;var t=Math.min(this.width,this.height)/2;this.shape.scaleCenter=[0,a.interpolateNumberLinear(0,t,e)],this.postShapeUpdate()}}])&&n(t.prototype,i),l&&n(t,l),e}();e.exports=l},function(e,t,i){"use strict";i.r(t);i(4),i(5),i(6);var n=i(2),s=i.n(n);window.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("canvas");e.width=window.innerWidth,e.height=window.innerHeight;new s.a(e)}))},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var i=[],n=!0,s=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){s=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw a}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=i(0),o=i(1),l={scale:[1,1],rotate:0,scaleCenter:[0,0],hue:127,colors:[[13,"47%","42%"],[51,"42%","55%"],[0,"24%","36%"],[40,"69%","64%"],[51,"92%","70%"]]},h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=Object.assign({},l,t),this.ctx=t.ctx,this.vertices=t.vertices,this.scale=t.scale,this.scaleCenter=t.scaleCenter,this.rotate=t.rotate,this.colors=t.colors,this.hue=t.hue,this.computeFixedPoint(),this.computeDepth()}var t,i,h;return t=e,h=[{key:"polygon",value:function(t){for(var i=t.ctx,n=t.sides,s=t.radius,a=t.rotate,r=t.scale,o=t.scaleCenter,h=t.hue,c=void 0===h?127:h,u=[],d=2*Math.PI/n,p=0;p<n;p++){var f=p*d,v=s*Math.cos(f),m=s*Math.sin(f);u.push([m,v])}void 0===a&&(a=d/2);var y=Math.abs(Math.cos(d/2));return new e({ctx:i,vertices:u,rotate:a,scale:r=r||[y,y],scaleCenter:o=o||l.scaleCenter,hue:c})}}],(i=[{key:"tracePath",value:function(){var e=this.ctx,t=this.vertices;e.beginPath(),e.moveTo.apply(e,s(t[0]));for(var i=1;i<t.length;i++)e.lineTo.apply(e,s(t[i]));e.closePath()}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;t=t||this.ctx;var i=this.scale,n=this.rotate,s=this.fixedPoint,a={scale:r.interpolateVectorLogarithmic(l.scale,i,e),rotate:r.interpolateNumberLinear(l.rotate,n,e),center:s};r.applyTransform(t,a)}},{key:"draw",value:function(e,t){var i=this.ctx,s=this.hue,a=this.colors,l=this.maxDepth,h=this.depthOffset;i.save(),this.transform(-h);for(var c=-h;c<l;c++){this.tracePath(i);var u=(e+c)%a.length,d=n(a[u=(u+a.length)%a.length],3),p=d[0],f=d[1],v=d[2],m=void 0;if(o.ALPHA){var y=Math.max(Math.ceil(l/2),Math.min(l,5)),g=r.interpolateNumberLinear(c+1,c,t)-y;m=r.interpolateNumberLinear(1,0,g/(1+l-y))}else m=1;i.fillStyle="hsla(".concat((s+p)%360,",").concat(f,",").concat(v,",").concat(m,")"),i.fill(),this.transform()}i.restore()}},{key:"computeFixedPoint",value:function(){var e=this.ctx,t=this.scale,i=this.rotate,n=this.scaleCenter;if(1!==this.scale[0]&&1!==this.scale[1]){e.save(),r.applyTransform(e,{scale:t,rotate:i,center:n});var s=e.getTransform();this.fixedPoint=r.fixedPoint(s),e.restore()}else this.fixedPoint=n}},{key:"computeDepth",value:function(){var e=this.ctx.canvas,t=e.width,i=e.height,s=Math.sqrt(Math.pow(t/2,2)+Math.pow(i/2,2)),a=n(this.scale,2),o=a[0],l=a[1];this.depthOffset=Math.ceil(r.logBase(2*s,Math.min(1/o,1/l))),this.maxDepth=Math.max(Math.ceil(-r.logBase(t,o)),Math.ceil(-r.logBase(i,l))),this.maxDepth=Math.min(this.maxDepth,5e3)}}])&&a(t.prototype,i),h&&a(t,h),e}();e.exports=h},function(e,t){var i=function(e){e.stopPropagation()},n=null,s=function e(){var t=document.getElementById("modal"),s=t.parentElement,a=document.getElementById("start-button");s.classList.add("hiding"),t.classList.add("hiding"),s.removeEventListener("click",e),a.removeEventListener("click",e),t.removeEventListener("click",i),setTimeout((function(){t.classList.add("hidden"),s.classList.add("hidden")}),400),n&&n()};e.exports={openModal:function(e){var t=e.animate,a=e.onClose,r=document.getElementById("modal"),o=r.parentElement,l=document.getElementById("start-button");o.classList.remove("hidden"),r.classList.remove("hidden"),t&&setTimeout((function(){r.classList.remove("hiding"),o.classList.remove("hiding")}),0),o.addEventListener("click",s),l.addEventListener("click",s),r.addEventListener("click",i),a&&(n=a)},closeModal:s}}]);
//# sourceMappingURL=main.js.map